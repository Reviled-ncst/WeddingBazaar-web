<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Console Fix Test - Wedding Bazaar</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: linear-gradient(135deg, #fce7f3 0%, #e0e7ff 100%);
    }
    
    .container {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }
    
    h1 {
      color: #ec4899;
      margin-bottom: 10px;
    }
    
    .status {
      padding: 15px;
      margin: 20px 0;
      border-radius: 8px;
      font-weight: bold;
    }
    
    .success {
      background: #d1fae5;
      color: #065f46;
      border: 2px solid #10b981;
    }
    
    .warning {
      background: #fef3c7;
      color: #92400e;
      border: 2px solid #f59e0b;
    }
    
    .error {
      background: #fee2e2;
      color: #991b1b;
      border: 2px solid #ef4444;
    }
    
    .info {
      background: #dbeafe;
      color: #1e40af;
      border: 2px solid #3b82f6;
    }
    
    button {
      background: linear-gradient(135deg, #ec4899, #8b5cf6);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 5px;
    }
    
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4);
    }
    
    pre {
      background: #1f2937;
      color: #10b981;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 13px;
    }
    
    .instructions {
      margin: 20px 0;
      padding: 20px;
      background: #f3f4f6;
      border-radius: 8px;
      border-left: 4px solid #ec4899;
    }
    
    .instructions ol {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .instructions li {
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš¨ Emergency Console Fix</h1>
    <p style="color: #6b7280;">Wedding Bazaar - Booking Debug Tool</p>
    
    <div class="status info">
      <strong>âœ… Script Loaded Successfully!</strong><br>
      The console fix has been automatically applied.
    </div>
    
    <div class="instructions">
      <h3>ğŸ“‹ Instructions:</h3>
      <ol>
        <li><strong>Open Developer Console</strong> - Press <code>F12</code> or <code>Ctrl+Shift+J</code> (Windows) / <code>Cmd+Option+J</code> (Mac)</li>
        <li><strong>Check the Console Tab</strong> - You should see colorful test messages</li>
        <li><strong>Look for:</strong>
          <ul>
            <li>ğŸ§ª TEST messages (1, 2, 3)</li>
            <li>ğŸ“‹ CHECKLIST messages (1-5)</li>
            <li>âœ¨ FINAL TEST (with gradient background)</li>
          </ul>
        </li>
        <li><strong>Test the Interceptor</strong> - Click button below to simulate a booking call</li>
        <li><strong>Go to Production Site</strong> - Open <a href="https://weddingbazaarph.web.app" target="_blank">weddingbazaarph.web.app</a> and run this script there</li>
      </ol>
    </div>
    
    <div style="text-align: center; margin: 30px 0;">
      <button onclick="testFetch()">ğŸ§ª Test Fetch Interceptor</button>
      <button onclick="testForceLog()">ğŸ“£ Test Force Log</button>
      <button onclick="simulateBooking()">ğŸ¯ Simulate Booking API Call</button>
    </div>
    
    <div id="results"></div>
    
    <div class="status warning" style="margin-top: 30px;">
      <strong>âš ï¸ Next Steps:</strong><br>
      1. If console works here, go to your production site<br>
      2. Open console on production site (F12)<br>
      3. Copy the entire EMERGENCY_CONSOLE_FIX.js file<br>
      4. Paste it into the production site's console<br>
      5. Press Enter to run it<br>
      6. Then try submitting a booking and watch for logs
    </div>
    
    <div class="instructions" style="margin-top: 20px;">
      <h3>ğŸ¯ Expected Output in Console:</h3>
      <pre>ğŸ§ª TEST 1: Can you see this message?
ğŸ§ª TEST 2: Can you see this warning?
ğŸ§ª TEST 3: Can you see this error?
ğŸ“‹ CHECKLIST: Can you see ALL of these?
1ï¸âƒ£ Regular log message
2ï¸âƒ£ Info message
3ï¸âƒ£ Warning message
4ï¸âƒ£ Error message
5ï¸âƒ£ Debug message
ğŸ”§ Setting up booking log interceptor...
âœ… Fetch interceptor active!
ğŸ”“ Creating force logging functions...
âœ… Force logging enabled!
ğŸ‰ SETUP COMPLETE!</pre>
    </div>
  </div>

  <script src="EMERGENCY_CONSOLE_FIX.js"></script>
  
  <script>
    // Additional test functions
    function testFetch() {
      console.log('%cğŸ§ª Testing Fetch Interceptor', 'background: blue; color: white; padding: 8px; font-weight: bold;');
      
      fetch('https://httpbin.org/get')
        .then(r => r.json())
        .then(data => {
          showResult('success', 'âœ… Fetch interceptor working! Check console for logs.');
          console.log('Fetch test response:', data);
        })
        .catch(err => {
          showResult('error', 'âŒ Fetch failed: ' + err.message);
        });
    }
    
    function testForceLog() {
      console.log('%cğŸ§ª Testing Force Log', 'background: purple; color: white; padding: 8px; font-weight: bold;');
      
      if (window.FORCE_LOG) {
        window.FORCE_LOG('ğŸ‰ FORCE_LOG is working!', 'Check console and top-right corner');
        showResult('success', 'âœ… FORCE_LOG executed! Check console and screen.');
      } else {
        showResult('error', 'âŒ FORCE_LOG not available. Script may not have loaded.');
      }
    }
    
    function simulateBooking() {
      console.log('%cğŸ§ª Simulating Booking API Call', 'background: red; color: white; padding: 8px; font-weight: bold;');
      
      const testBooking = {
        serviceId: 'test-123',
        vendorId: 'vendor-456',
        eventDate: '2025-12-01',
        eventLocation: 'Test Venue',
        notes: 'This is a test booking'
      };
      
      // Simulate booking API call
      fetch('https://httpbin.org/post', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(testBooking)
      })
        .then(r => r.json())
        .then(data => {
          showResult('success', 'âœ… Booking simulation complete! Check console for detailed logs.');
          console.log('Simulated booking response:', data);
        })
        .catch(err => {
          showResult('error', 'âŒ Simulation failed: ' + err.message);
        });
    }
    
    function showResult(type, message) {
      const results = document.getElementById('results');
      const div = document.createElement('div');
      div.className = `status ${type}`;
      div.textContent = message;
      results.appendChild(div);
      
      setTimeout(() => div.remove(), 5000);
    }
    
    // Auto-test on load
    window.addEventListener('load', () => {
      console.log('%cğŸ‰ TEST PAGE LOADED', 'background: linear-gradient(to right, #10b981, #3b82f6); color: white; padding: 12px 20px; font-size: 18px; font-weight: bold; border-radius: 8px;');
      console.log('âœ… This page automatically loaded the console fix script');
      console.log('âœ… Check above for all the test messages');
      console.log('âœ… Now test the buttons on the page');
      
      showResult('info', 'âœ… Page loaded! Check console for test messages.');
    });
  </script>
</body>
</html>
