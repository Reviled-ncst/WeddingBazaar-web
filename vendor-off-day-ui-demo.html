<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Off-Day System - Live UI Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .calendar-day {
            transition: all 0.2s ease;
        }
        .calendar-day:hover {
            transform: scale(1.05);
        }
        .notification {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-4xl mx-auto p-6">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">üéØ Vendor Off-Day System</h1>
            <p class="text-gray-600">Live demonstration of how vendors can mark unavailable dates</p>
            <div class="mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-blue-800 font-medium">This is exactly how it works in the live application!</span>
                </div>
                <p class="text-blue-700 mt-2">Visit <a href="https://weddingbazaar-web.web.app/vendor" class="underline font-medium">https://weddingbazaar-web.web.app/vendor</a> to try it yourself</p>
            </div>
        </div>

        <!-- Calendar Demo -->
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <!-- Calendar Header -->
            <div class="border-b border-gray-200 p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <h2 class="text-xl font-semibold">Vendor Availability Calendar</h2>
                    </div>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Add Off Day
                    </button>
                </div>

                <!-- Legend -->
                <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                        <span>Available (Click to set off day)</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                        <span>Partially Booked</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                        <span>Fully Booked</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                        <span>Off Day (Click to remove)</span>
                    </div>
                </div>
            </div>

            <!-- Calendar Grid -->
            <div class="p-6">
                <!-- Month Navigation -->
                <div class="flex items-center justify-between mb-6">
                    <button class="p-2 hover:bg-gray-100 rounded-lg">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <h3 class="text-xl font-semibold">December 2024</h3>
                    <button class="p-2 hover:bg-gray-100 rounded-lg">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>

                <!-- Days of Week -->
                <div class="grid grid-cols-7 gap-1 mb-4">
                    <div class="p-3 text-center font-medium text-gray-500">Sun</div>
                    <div class="p-3 text-center font-medium text-gray-500">Mon</div>
                    <div class="p-3 text-center font-medium text-gray-500">Tue</div>
                    <div class="p-3 text-center font-medium text-gray-500">Wed</div>
                    <div class="p-3 text-center font-medium text-gray-500">Thu</div>
                    <div class="p-3 text-center font-medium text-gray-500">Fri</div>
                    <div class="p-3 text-center font-medium text-gray-500">Sat</div>
                </div>

                <!-- Calendar Days -->
                <div class="grid grid-cols-7 gap-1" id="calendar-grid">
                    <!-- Days will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Current Off Days -->
        <div class="mt-6 bg-white rounded-2xl shadow-lg p-6">
            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z" clip-rule="evenodd"></path>
                </svg>
                Current Off Days
            </h3>
            <div id="off-days-list" class="space-y-2">
                <p class="text-gray-500 italic">No off days set - Click on available dates to add them</p>
            </div>
        </div>

        <!-- Instructions -->
        <div class="mt-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6">
            <h3 class="text-lg font-semibold mb-4 text-gray-900">How to Use</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-medium text-gray-900 mb-2">‚úÖ Setting Off Days</h4>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>‚Ä¢ Click any <span class="inline-flex items-center"><span class="w-2 h-2 bg-green-500 rounded-full mr-1"></span>available</span> date</li>
                        <li>‚Ä¢ Date instantly turns <span class="inline-flex items-center"><span class="w-2 h-2 bg-red-500 rounded-full mr-1"></span>red</span> (off day)</li>
                        <li>‚Ä¢ Success notification appears</li>
                        <li>‚Ä¢ Customers cannot book that date</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium text-gray-900 mb-2">‚ùå Removing Off Days</h4>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>‚Ä¢ Click any <span class="inline-flex items-center"><span class="w-2 h-2 bg-red-500 rounded-full mr-1"></span>off day</span> date</li>
                        <li>‚Ä¢ Confirmation dialog shows reason</li>
                        <li>‚Ä¢ Click OK to remove</li>
                        <li>‚Ä¢ Date becomes available again</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-4 right-4 z-50"></div>

    <script>
        // Calendar data (same as backend provides)
        const calendarData = {
            bookings: {
                '2024-12-15': { bookings: 1, maxBookings: 2, status: 'partially_booked' },
                '2024-12-16': { bookings: 2, maxBookings: 2, status: 'fully_booked' },
                '2024-12-20': { bookings: 1, maxBookings: 1, status: 'fully_booked' }
            },
            offDays: []
        };

        // Generate calendar days
        function generateCalendar() {
            const grid = document.getElementById('calendar-grid');
            const year = 2024;
            const month = 11; // December (0-indexed)
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const endDate = new Date(lastDay);
            endDate.setDate(endDate.getDate() + (6 - lastDay.getDay()));

            grid.innerHTML = '';
            
            for (let current = new Date(startDate); current <= endDate; current.setDate(current.getDate() + 1)) {
                const dateStr = current.getFullYear() + '-' + 
                              String(current.getMonth() + 1).padStart(2, '0') + '-' + 
                              String(current.getDate()).padStart(2, '0');
                
                const isCurrentMonth = current.getMonth() === month;
                const isToday = dateStr === new Date().toISOString().split('T')[0];
                
                const dayElement = createDayElement(current.getDate(), dateStr, isCurrentMonth, isToday);
                grid.appendChild(dayElement);
            }
        }

        // Create individual day element
        function createDayElement(day, dateStr, isCurrentMonth, isToday) {
            const dayDiv = document.createElement('div');
            const status = getDayStatus(dateStr);
            
            dayDiv.className = `calendar-day relative p-3 rounded-lg cursor-pointer group ${
                isCurrentMonth ? 'text-gray-900' : 'text-gray-400'
            } ${status.bgColor} ${isCurrentMonth ? 'hover:shadow-md' : ''}`;
            
            dayDiv.innerHTML = `
                <div class="text-sm font-medium">${day}</div>
                <div class="mt-1 flex items-center justify-center">
                    <div class="${status.dotColor} w-3 h-3 rounded-full"></div>
                </div>
                ${isCurrentMonth && status.clickable ? `
                    <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-lg flex items-center justify-center">
                        <div class="bg-black/80 text-white px-2 py-1 rounded text-xs font-medium">
                            ${status.action}
                        </div>
                    </div>
                ` : ''}
            `;

            if (isCurrentMonth && status.clickable) {
                dayDiv.addEventListener('click', () => handleDayClick(dateStr, status));
            }

            return dayDiv;
        }

        // Get day status
        function getDayStatus(dateStr) {
            const booking = calendarData.bookings[dateStr];
            const offDay = calendarData.offDays.find(od => od.date === dateStr);

            if (offDay) {
                return {
                    bgColor: 'bg-red-50 hover:bg-red-100',
                    dotColor: 'bg-red-500',
                    status: 'off_day',
                    clickable: true,
                    action: 'Click to remove',
                    reason: offDay.reason
                };
            }

            if (booking) {
                if (booking.status === 'fully_booked') {
                    return {
                        bgColor: 'bg-orange-50',
                        dotColor: 'bg-orange-500',
                        status: 'fully_booked',
                        clickable: false
                    };
                }
                if (booking.status === 'partially_booked') {
                    return {
                        bgColor: 'bg-yellow-50',
                        dotColor: 'bg-yellow-500',
                        status: 'partially_booked',
                        clickable: false
                    };
                }
            }

            return {
                bgColor: 'bg-green-50 hover:bg-green-100',
                dotColor: 'bg-green-500',
                status: 'available',
                clickable: true,
                action: 'Click to set off day'
            };
        }

        // Handle day click
        function handleDayClick(dateStr, status) {
            if (status.status === 'off_day') {
                // Remove off day
                if (confirm(`Remove off day for ${new Date(dateStr).toLocaleDateString()}?\n\nReason: ${status.reason}`)) {
                    const index = calendarData.offDays.findIndex(od => od.date === dateStr);
                    if (index !== -1) {
                        calendarData.offDays.splice(index, 1);
                        showNotification('Off day removed successfully!', 'success');
                        updateCalendar();
                        updateOffDaysList();
                    }
                }
            } else if (status.status === 'available') {
                // Set off day
                const today = new Date();
                const clickDate = new Date(dateStr);
                
                if (clickDate < today) {
                    showNotification('Cannot set past dates as off days', 'error');
                    return;
                }
                
                calendarData.offDays.push({
                    id: Date.now().toString(),
                    date: dateStr,
                    reason: 'Personal time off',
                    vendorId: 'demo'
                });
                
                showNotification(`Off day set for ${clickDate.toLocaleDateString()}`, 'success');
                updateCalendar();
                updateOffDaysList();
            }
        }

        // Show notification
        function showNotification(message, type) {
            const container = document.getElementById('notification-container');
            const notification = document.createElement('div');
            
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
            const icon = type === 'success' ? 
                '<path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path>' :
                '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd"></path>';
            
            notification.className = `notification ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 mb-2`;
            notification.innerHTML = `
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    ${icon}
                </svg>
                ${message}
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                if (container.contains(notification)) {
                    container.removeChild(notification);
                }
            }, 3000);
        }

        // Update calendar display
        function updateCalendar() {
            generateCalendar();
        }

        // Update off days list
        function updateOffDaysList() {
            const list = document.getElementById('off-days-list');
            
            if (calendarData.offDays.length === 0) {
                list.innerHTML = '<p class="text-gray-500 italic">No off days set - Click on available dates to add them</p>';
            } else {
                list.innerHTML = calendarData.offDays.map(offDay => {
                    const date = new Date(offDay.date);
                    return `
                        <div class="flex items-center justify-between bg-red-50 border border-red-200 rounded-lg p-3">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                <div>
                                    <div class="font-medium">${date.toLocaleDateString()}</div>
                                    <div class="text-sm text-gray-600">${offDay.reason}</div>
                                </div>
                            </div>
                            <button onclick="removeOffDay('${offDay.date}')" class="text-red-600 hover:text-red-800 transition-colors">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    `;
                }).join('');
            }
        }

        // Remove off day function
        function removeOffDay(dateStr) {
            const index = calendarData.offDays.findIndex(od => od.date === dateStr);
            if (index !== -1) {
                calendarData.offDays.splice(index, 1);
                showNotification('Off day removed successfully!', 'success');
                updateCalendar();
                updateOffDaysList();
            }
        }

        // Initialize
        generateCalendar();
        updateOffDaysList();
    </script>
</body>
</html>
